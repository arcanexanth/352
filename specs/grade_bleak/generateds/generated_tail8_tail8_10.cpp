TEST(BleakVirtualMachine, tail8_tail8_10) {
  BleakVirtualMachine vm("cases/tail8.bleak", "cases/tail8_10.in");
  for (int reset = 0; reset < 5; ++reset) {
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 0 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 0 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 0 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 0 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(0, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 0 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 0 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 0 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 0 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 0 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 0 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 0 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 0 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 0 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 0 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 0 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 0 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 0 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 1 step, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 1 step, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 1 step, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 1 step, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(1, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 1 step, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 1 step, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 1 step, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 1 step, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 1 step, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 1 step, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 1 step, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 1 step, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 1 step, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 1 step, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 1 step, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 1 step, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 1 step, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 2 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 2 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 2 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 2 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(2, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 2 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 2 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 2 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 2 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 2 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 2 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 2 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 2 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 2 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 2 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 2 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 2 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 2 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 3 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 3 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 3 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 3 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(3, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 3 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 3 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 3 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 3 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 3 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 3 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 3 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 3 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 3 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 3 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 3 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 3 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 3 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 4 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 4 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 4 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 4 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(4, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 4 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 4 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 4 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 4 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 4 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 4 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 4 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 4 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 4 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 4 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 4 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 4 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 4 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 5 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 5 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 5 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 5 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(5, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 5 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 5 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 5 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 5 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 5 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 5 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 5 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 5 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 5 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 5 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 5 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 5 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 5 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 6 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 6 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 6 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 6 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(6, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 6 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 6 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 6 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 6 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 6 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 6 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 6 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 6 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 6 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 6 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 6 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 6 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 6 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 7 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 7 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 7 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 7 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(7, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 7 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 7 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 7 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 7 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 7 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 7 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 7 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 7 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 7 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 7 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 7 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 7 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 7 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 8 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 8 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 8 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 8 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(2, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 8 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 8 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 8 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 8 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 8 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 8 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 8 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 8 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 8 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 8 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 8 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 8 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 8 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 9 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 9 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 9 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 9 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(3, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 9 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 9 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 9 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 9 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 9 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 9 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 9 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 9 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 9 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 9 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 9 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 9 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 9 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 10 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 10 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 10 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 10 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(4, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 10 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 10 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 10 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 10 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 10 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 10 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 10 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 10 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 10 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 10 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 10 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 10 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 10 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 11 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 11 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 11 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 11 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(5, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 11 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 11 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 11 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 11 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 11 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 11 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 11 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 11 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 11 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 11 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 11 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 11 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 11 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 12 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 12 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 12 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 12 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(6, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 12 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 12 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 12 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 12 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 12 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 12 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 12 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 12 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 12 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 12 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 12 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 12 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 12 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 13 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 13 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 13 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 13 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(7, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 13 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 13 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 13 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 13 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 13 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 13 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 13 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 13 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 13 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 13 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 13 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 13 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 13 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 14 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 14 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 14 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 14 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(2, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 14 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 14 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 14 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 14 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 14 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 14 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 14 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 14 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 14 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 14 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 14 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 14 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 14 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 15 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 15 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 15 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 15 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(3, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 15 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 15 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 15 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 15 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 15 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 15 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 15 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 15 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 15 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 15 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 15 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 15 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 15 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 16 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 16 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 16 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 16 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(4, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 16 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 16 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 16 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 16 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 16 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 16 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 16 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 16 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 16 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 16 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 16 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 16 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 16 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 17 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 17 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 17 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 17 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(5, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 17 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 17 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 17 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 17 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 17 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 17 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 17 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 17 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 17 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 17 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 17 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 17 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 17 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 18 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 18 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 18 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 18 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(6, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 18 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 18 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 18 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 18 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 18 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 18 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 18 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 18 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 18 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 18 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 18 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 18 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 18 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 19 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 19 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 19 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 19 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(7, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 19 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 19 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 19 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 19 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 19 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 19 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 19 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 19 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 19 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 19 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 19 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 19 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 19 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 20 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 20 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 20 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 20 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(2, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 20 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 20 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 20 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 20 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 20 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 20 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 20 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 20 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 20 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 20 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 20 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 20 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 20 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 21 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 21 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 21 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 21 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(3, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 21 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 21 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 21 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 21 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 21 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 21 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 21 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 21 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 21 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 21 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 21 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 21 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 21 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 22 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 22 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 22 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 22 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(4, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 22 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 22 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 22 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 22 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 22 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 22 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 22 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 22 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 22 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 22 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 22 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 22 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 22 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 23 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 23 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 23 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 23 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(5, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 23 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 23 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 23 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 23 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 23 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 23 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 23 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 23 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 23 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 23 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 23 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 23 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 23 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 24 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 24 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 24 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 24 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(6, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 24 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 24 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 24 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 24 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 24 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 24 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 24 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 24 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 24 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 24 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 24 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 24 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 24 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 25 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 25 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 25 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 25 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(7, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 25 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 25 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 25 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 25 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 25 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 25 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 25 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 25 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 25 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 25 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 25 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 25 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 25 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 26 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 26 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 26 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 26 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(2, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 26 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 26 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 26 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 26 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 26 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 26 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 26 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 26 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 26 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 26 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 26 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 26 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 26 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 27 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 27 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 27 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 27 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(3, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 27 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 27 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 27 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 27 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 27 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 27 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 27 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 27 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 27 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 27 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 27 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 27 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 27 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 28 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 28 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 28 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 28 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(4, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 28 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 28 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 28 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 28 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 28 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 28 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 28 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 28 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 28 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 28 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 28 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 28 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 28 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 29 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 29 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 29 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 29 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(5, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 29 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 29 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 29 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 29 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 29 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 29 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 29 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 29 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 29 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 29 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 29 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 29 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 29 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 30 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 30 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 30 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 30 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(6, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 30 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 30 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 30 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 30 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 30 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 30 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 30 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 30 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 30 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 30 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 30 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 30 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 30 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 31 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 31 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 31 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 31 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(7, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 31 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 31 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 31 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 31 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 31 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 31 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 31 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 31 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 31 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 31 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 31 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 31 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 31 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 32 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 32 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 32 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 32 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(2, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 32 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 32 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 32 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 32 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 32 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 32 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 32 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 32 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 32 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 32 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 32 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 32 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 32 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 33 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 33 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 33 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 33 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(3, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 33 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 33 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 33 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 33 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 33 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 33 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 33 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 33 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 33 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 33 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 33 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 33 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 33 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 34 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 34 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 34 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 34 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(4, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 34 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 34 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 34 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 34 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 34 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 34 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 34 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 34 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 34 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 34 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 34 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 34 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 34 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 35 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 35 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 35 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 35 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(5, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 35 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 35 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 35 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 35 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 35 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 35 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 35 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 35 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 35 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 35 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 35 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 35 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 35 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 36 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 36 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 36 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 36 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(6, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 36 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 36 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 36 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 36 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 36 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 36 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 36 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 36 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 36 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 36 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 36 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 36 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 36 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 37 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 37 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 37 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 37 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(7, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 37 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 37 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 37 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 37 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 37 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 37 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 37 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 37 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 37 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 37 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 37 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 37 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 37 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 38 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 38 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 38 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 38 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(2, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 38 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 38 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 38 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 38 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 38 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 38 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 38 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 38 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 38 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 38 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 38 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 38 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 38 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 39 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 39 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 39 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 39 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(3, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 39 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 39 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 39 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 39 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 39 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 39 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 39 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 39 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 39 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 39 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 39 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 39 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 39 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 40 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 40 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 40 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 40 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(4, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 40 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 40 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 40 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 40 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 40 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 40 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 40 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 40 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 40 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 40 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 40 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 40 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 40 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 41 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 41 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 41 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 41 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(5, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 41 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 41 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 41 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 41 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 41 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 41 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 41 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 41 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 41 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 41 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 41 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 41 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 41 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 42 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 42 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 42 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 42 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(6, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 42 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 42 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 42 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 42 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 42 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 42 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 42 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 42 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 42 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 42 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 42 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 42 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 42 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 43 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 43 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 43 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 43 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(7, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 43 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 43 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 43 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 43 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 43 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 43 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 43 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 43 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 43 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 43 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 43 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 43 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 43 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 44 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 44 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 44 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 44 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(2, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 44 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 44 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 44 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 44 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 44 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 44 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 44 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 44 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 44 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 44 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 44 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 44 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 44 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 45 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 45 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 45 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 45 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(3, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 45 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 45 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 45 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 45 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 45 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 45 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 45 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 45 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 45 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 45 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 45 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 45 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 45 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 46 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 46 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 46 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 46 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(4, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 46 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 46 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 46 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 46 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 46 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 46 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 46 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 46 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 46 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 46 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 46 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 46 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 46 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 47 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 47 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 47 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 47 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(5, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 47 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 47 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 47 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 47 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 47 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 47 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 47 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 47 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 47 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 47 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 47 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 47 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 47 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 48 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 48 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 48 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 48 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(6, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 48 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 48 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 48 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 48 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 48 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 48 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 48 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 48 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 48 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 48 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 48 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 48 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(-1, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 48 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 49 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 49 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 49 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 49 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(1, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 49 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 49 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 49 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 49 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 49 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 49 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 49 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 49 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 49 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 49 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 49 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 49 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(-1, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 49 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 50 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 50 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 50 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 50 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(2, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 50 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 50 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 50 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 50 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 50 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 50 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 50 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 50 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 50 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 50 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 50 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 50 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 50 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 51 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 51 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 51 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 51 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(3, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 51 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 51 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 51 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 51 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 51 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 51 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 51 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 51 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 51 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 51 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 51 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 51 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 51 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 52 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 52 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 52 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 52 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(4, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 52 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 52 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 52 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 52 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 52 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 52 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 52 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 52 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 52 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 52 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 52 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 52 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 52 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 53 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 53 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 53 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 53 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(5, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 53 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 53 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 53 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 53 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 53 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 53 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 53 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 53 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 53 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 53 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 53 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 53 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 53 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 54 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 54 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 54 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 54 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(6, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 54 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 54 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 54 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 54 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 54 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 54 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 54 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 54 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 54 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 54 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 54 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 54 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 54 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 55 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 55 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 55 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 55 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(7, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 55 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 55 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 55 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 55 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 55 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 55 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 55 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 55 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 55 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 55 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 55 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 55 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 55 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 56 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 56 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 56 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 56 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(2, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 56 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 56 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 56 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 56 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 56 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 56 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 56 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 56 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 56 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 56 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 56 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 56 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 56 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 57 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 57 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 57 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 57 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(3, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 57 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 57 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 57 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 57 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 57 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 57 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 57 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 57 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 57 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 57 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 57 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 57 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 57 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 58 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 58 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 58 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 58 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(4, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 58 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 58 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 58 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 58 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 58 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 58 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 58 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 58 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 58 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 58 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 58 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 58 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 58 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 59 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 59 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 59 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 59 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(5, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 59 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 59 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 59 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 59 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 59 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 59 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 59 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 59 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 59 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 59 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 59 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 59 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 59 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 60 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 60 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 60 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 60 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(6, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 60 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 60 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 60 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 60 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 60 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 60 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 60 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 60 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 60 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 60 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 60 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 60 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 60 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 61 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 61 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 61 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 61 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(7, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 61 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 61 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 61 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 61 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 61 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 61 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 61 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 61 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 61 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 61 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 61 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 61 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 61 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 62 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 62 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 62 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 62 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(2, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 62 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 62 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 62 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 62 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 62 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 62 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 62 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 62 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 62 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 62 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 62 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 62 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 62 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 63 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 63 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 63 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 63 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(8, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 63 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 63 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 63 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 63 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 63 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 63 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 63 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 63 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 63 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 63 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 63 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 63 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 63 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 64 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 64 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 64 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 64 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(9, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 64 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 64 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 64 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 64 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 64 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 64 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 64 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 64 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 64 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 64 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 64 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 64 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 64 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 65 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 65 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({}), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 65 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 65 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(10, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 65 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 65 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 65 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 65 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 65 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 65 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 65 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 65 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 65 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 65 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 65 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 65 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 65 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 66 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 66 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({3, }), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 66 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 66 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(11, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 66 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 66 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 66 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 66 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 66 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 66 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 66 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 66 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 66 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 66 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 66 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 66 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 66 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 67 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 67 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({3, }), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 67 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 67 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(12, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 67 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 67 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 67 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 67 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 67 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 67 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 67 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 67 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 67 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 67 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 67 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 67 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 67 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 68 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 68 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({3, }), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 68 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 68 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(13, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 68 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 68 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 68 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 68 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 68 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 68 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 68 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 68 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 68 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 68 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 68 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 68 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 68 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 69 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 69 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({3, }), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 69 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 69 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(14, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 69 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 69 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 69 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 69 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 69 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 69 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 69 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 69 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 69 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 69 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 69 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 69 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 69 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 70 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 70 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({3, }), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 70 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 70 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(9, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 70 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 70 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 70 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 70 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 70 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 70 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 70 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 70 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 70 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 70 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 70 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 70 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 70 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 71 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 71 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({3, }), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 71 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 71 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(10, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 71 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 71 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 71 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 71 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 71 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 71 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 71 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 71 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 71 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 71 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 71 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 71 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 71 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 72 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 72 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({3, 4, }), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 72 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 72 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(11, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 72 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 72 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 72 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 72 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 72 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 72 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 72 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 72 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 72 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 72 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 72 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 72 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 72 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 73 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 73 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({3, 4, }), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 73 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 73 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(12, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 73 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 73 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 73 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 73 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 73 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 73 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 73 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 73 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 73 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 73 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 73 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 73 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 73 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 74 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 74 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({3, 4, }), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 74 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 74 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(13, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 74 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 74 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 74 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 74 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 74 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 74 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 74 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 74 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 74 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 74 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 74 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 74 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 74 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 75 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 75 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({3, 4, }), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 75 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 75 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(14, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 75 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 75 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 75 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 75 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 75 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 75 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 75 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 75 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 75 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 75 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 75 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 75 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 75 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 76 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 76 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({3, 4, }), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 76 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 76 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(9, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 76 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 76 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 76 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 76 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 76 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 76 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 76 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 76 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 76 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 76 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 76 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 76 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 76 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 77 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 77 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({3, 4, }), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 77 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 77 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(10, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 77 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 77 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 77 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 77 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 77 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 77 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 77 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 77 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 77 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 77 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 77 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 77 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 77 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 78 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 78 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({3, 4, 5, }), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 78 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 78 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(11, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 78 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 78 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 78 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 78 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 78 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 78 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 78 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 78 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 78 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 78 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 78 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 78 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 78 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 79 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 79 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({3, 4, 5, }), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 79 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 79 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(12, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 79 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 79 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 79 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 79 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 79 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 79 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 79 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 79 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 79 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 79 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 79 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 79 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 79 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 80 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 80 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({3, 4, 5, }), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 80 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 80 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(13, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 80 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 80 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 80 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 80 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 80 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 80 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 80 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 80 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 80 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 80 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 80 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 80 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 80 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 81 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 81 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({3, 4, 5, }), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 81 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 81 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(14, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 81 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 81 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 81 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 81 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 81 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 81 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 81 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 81 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 81 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 81 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 81 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 81 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 81 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 82 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 82 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({3, 4, 5, }), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 82 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 82 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(9, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 82 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 82 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 82 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 82 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 82 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 82 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 82 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 82 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 82 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 82 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 82 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 82 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 82 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 83 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 83 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({3, 4, 5, }), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 83 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 83 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(10, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 83 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 83 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 83 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 83 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 83 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 83 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 83 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 83 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 83 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 83 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 83 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 83 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 83 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 84 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 84 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({3, 4, 5, 6, }), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 84 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 84 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(11, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 84 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 84 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 84 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 84 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 84 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 84 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 84 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 84 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 84 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 84 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 84 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 84 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 84 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 85 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 85 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({3, 4, 5, 6, }), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 85 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 85 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(12, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 85 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 85 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 85 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 85 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 85 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 85 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 85 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 85 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 85 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 85 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 85 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 85 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 85 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 86 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 86 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({3, 4, 5, 6, }), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 86 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 86 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(13, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 86 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 86 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 86 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 86 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 86 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 86 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 86 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 86 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 86 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 86 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 86 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 86 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 86 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 87 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 87 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({3, 4, 5, 6, }), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 87 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 87 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(14, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 87 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 87 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 87 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 87 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 87 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 87 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 87 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 87 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 87 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 87 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 87 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 87 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 87 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 88 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 88 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({3, 4, 5, 6, }), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 88 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 88 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(9, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 88 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 88 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 88 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 88 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 88 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 88 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 88 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 88 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 88 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 88 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 88 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 88 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 88 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 89 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 89 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({3, 4, 5, 6, }), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 89 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 89 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(10, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 89 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 89 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 89 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 89 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 89 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 89 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 89 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 89 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 89 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 89 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 89 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 89 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 89 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 90 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 90 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({3, 4, 5, 6, 7, }), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 90 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 90 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(11, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 90 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 90 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 90 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 90 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 90 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 90 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 90 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 90 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 90 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 90 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 90 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 90 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 90 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 91 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 91 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({3, 4, 5, 6, 7, }), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 91 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 91 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(12, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 91 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 91 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 91 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 91 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 91 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 91 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 91 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 91 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 91 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 91 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 91 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 91 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 91 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 92 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 92 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({3, 4, 5, 6, 7, }), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 92 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 92 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(13, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 92 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 92 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 92 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 92 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 92 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 92 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 92 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 92 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 92 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 92 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 92 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 92 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 92 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 93 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 93 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({3, 4, 5, 6, 7, }), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 93 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 93 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(14, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 93 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 93 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 93 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 93 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 93 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 93 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 93 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 93 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 93 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 93 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 93 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 93 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 93 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 94 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 94 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({3, 4, 5, 6, 7, }), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 94 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 94 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(9, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 94 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 94 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 94 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 94 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 94 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 94 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 94 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 94 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 94 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 94 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 94 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 94 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 94 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 95 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 95 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({3, 4, 5, 6, 7, }), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 95 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 95 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(10, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 95 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 95 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 95 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 95 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 95 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 95 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 95 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 95 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 95 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 95 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 95 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 95 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 95 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 96 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 96 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({3, 4, 5, 6, 7, 8, }), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 96 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 96 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(11, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 96 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 96 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 96 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 96 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 96 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 96 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 96 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 96 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 96 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 96 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 96 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 96 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 96 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 97 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 97 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({3, 4, 5, 6, 7, 8, }), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 97 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 97 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(12, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 97 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 97 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 97 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 97 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 97 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 97 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 97 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 97 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 97 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 97 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 97 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 97 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 97 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 98 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 98 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({3, 4, 5, 6, 7, 8, }), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 98 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 98 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(13, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 98 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 98 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 98 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 98 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 98 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 98 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 98 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 98 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 98 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 98 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 98 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 98 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(-1, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 98 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 99 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 99 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({3, 4, 5, 6, 7, 8, }), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 99 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 99 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(15, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 99 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 99 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 99 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 99 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 99 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 99 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 99 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 99 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 99 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 99 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 99 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 99 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(-1, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 99 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 100 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 100 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({3, 4, 5, 6, 7, 8, }), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 100 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 100 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(16, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 100 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 100 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 100 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 100 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 100 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 100 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 100 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 100 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 100 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 100 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 100 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 100 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 100 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 101 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 101 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({3, 4, 5, 6, 7, 8, }), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 101 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 101 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(9, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 101 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 101 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 101 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 101 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 101 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 101 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 101 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 101 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 101 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 101 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 101 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 101 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 101 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 102 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 102 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({3, 4, 5, 6, 7, 8, }), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 102 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 102 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(10, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 102 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 102 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 102 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 102 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 102 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 102 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 102 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 102 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 102 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 102 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 102 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 102 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 102 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 103 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 103 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({3, 4, 5, 6, 7, 8, 9, }), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 103 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 103 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(11, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 103 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 103 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 103 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 103 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 103 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 103 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 103 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 103 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 103 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 103 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 103 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(2, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 103 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 103 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 104 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 104 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({3, 4, 5, 6, 7, 8, 9, }), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 104 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 104 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(12, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 104 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 104 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 104 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 104 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 104 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 104 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 104 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 104 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 104 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 104 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 104 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 104 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 104 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 105 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 105 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({3, 4, 5, 6, 7, 8, 9, }), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 105 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 105 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(13, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 105 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 105 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 105 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 105 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 105 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 105 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 105 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 105 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 105 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 105 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 105 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 105 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 105 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 106 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 106 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({3, 4, 5, 6, 7, 8, 9, }), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 106 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 106 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(14, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 106 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 106 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 106 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 106 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 106 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 106 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 106 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 106 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 106 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 106 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 106 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 106 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 106 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 107 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 107 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({3, 4, 5, 6, 7, 8, 9, }), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 107 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 107 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(9, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 107 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 107 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 107 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 107 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 107 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 107 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 107 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 107 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 107 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 107 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 107 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 107 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 107 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 108 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 108 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({3, 4, 5, 6, 7, 8, 9, }), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 108 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 108 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(10, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 108 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 108 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 108 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 108 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 108 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 108 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 108 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 108 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 108 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 108 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 108 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 108 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 108 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 109 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 109 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 109 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 109 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(11, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 109 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 109 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 109 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 109 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 109 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 109 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 109 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 109 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 109 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 109 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 109 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(1, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 109 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 109 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 110 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 110 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 110 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 110 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(12, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 110 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 110 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 110 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 110 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 110 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 110 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 110 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 110 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 110 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 110 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 110 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 110 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 110 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 111 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 111 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 111 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 111 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(13, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 111 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 111 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 111 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 111 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 111 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 111 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 111 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 111 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 111 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 111 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 111 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 111 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 111 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 112 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 112 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 112 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 112 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(14, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 112 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 112 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 112 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 112 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 112 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 112 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 112 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 112 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 112 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 112 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 112 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 112 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 112 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 113 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 113 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 113 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 113 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(9, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 113 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 113 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 113 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 113 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 113 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 113 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 113 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 113 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 113 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 113 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 113 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 113 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 113 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 114 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 114 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 114 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 114 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(17, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 114 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 114 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 114 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 114 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 114 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 114 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 114 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 114 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 114 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 114 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 114 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 114 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 114 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    vm.Step();
    ASSERT_EQ(vector<string>({"input r8", "store r9 7 <- reset", "jzilch r8 print <- read", "input [r9]", "dec r8", "dec r9", "jneg r9 reset", "jmp read", "store r8 8 <- print", "jzilch r8 done <- emit", "output [r9]", "dec r8", "dec r9", "jneg r9 wrap", "jmp emit", "store r9 7 <- wrap", "jmp emit", "dec r8 <- done", }), vm.GetInstructions()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 115 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInstructions didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetInput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 115 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetInput didn't give back the list I expected.";
    ASSERT_EQ(vector<int>({3, 4, 5, 6, 7, 8, 9, 10, }), vm.GetOutput()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 115 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetOutput didn't give back the list I expected.";
    {
      map<string, int> expected_labels = {{"done", 17}, {"emit", 9}, {"print", 8}, {"read", 2}, {"reset", 1}, {"wrap", 15}, };
      ASSERT_EQ(expected_labels, vm.GetLabels()) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 115 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but GetLabels didn't give back the map I expected.";
    }
    ASSERT_EQ(18, vm.GetRegisters().find("pc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 115 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register pc wasn't what I expected it to be.";
    ASSERT_EQ(11, vm.GetRegisters().find("nc")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 115 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register nc wasn't what I expected it to be.";
    ASSERT_EQ(0, vm.GetRegisters().find("ra")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 115 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register ra wasn't what I expected it to be.";
    ASSERT_EQ(8, vm.GetRegisters().find("r0")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 115 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r0 wasn't what I expected it to be.";
    ASSERT_EQ(7, vm.GetRegisters().find("r1")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 115 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r1 wasn't what I expected it to be.";
    ASSERT_EQ(6, vm.GetRegisters().find("r2")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 115 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r2 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r3")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 115 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r3 wasn't what I expected it to be.";
    ASSERT_EQ(4, vm.GetRegisters().find("r4")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 115 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r4 wasn't what I expected it to be.";
    ASSERT_EQ(3, vm.GetRegisters().find("r5")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 115 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r5 wasn't what I expected it to be.";
    ASSERT_EQ(10, vm.GetRegisters().find("r6")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 115 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r6 wasn't what I expected it to be.";
    ASSERT_EQ(9, vm.GetRegisters().find("r7")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 115 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r7 wasn't what I expected it to be.";
    ASSERT_EQ(-1, vm.GetRegisters().find("r8")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 115 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r8 wasn't what I expected it to be.";
    ASSERT_EQ(5, vm.GetRegisters().find("r9")->second) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 115 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but register r9 wasn't what I expected it to be.";
    bool saw_exception = false;
    try {
      vm.Step();
    } catch (int actual_exception) {
      saw_exception = true;
      ASSERT_EQ(BleakVirtualMachine::INSTRUCTION_OUT_OF_BOUNDS, actual_exception) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 116 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but the exception raised on the last call to Step wasn't what I expected.";
    }
    ASSERT_TRUE(saw_exception) << "I tried stepping a virtual machine on source cases/tail8.bleak and input cases/tail8_10.in 116 steps, having reset " << reset << " time" << (reset == 1 ? "" : "s") << ", but the last call to Step didn't raise exception INSTRUCTION_OUT_OF_BOUNDS as I expected.";
    vm.Reset();
  }
}

